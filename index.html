<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="author" content="Nikava">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Welcome to Nikava.se</title>
    <link rel="icon" type="image/png" href="media/favicon.png">

    <style>
        * { box-sizing: border-box; }
        :root { --header-h: 72px; }

        /* Background + blur */
        body {
            margin: 0;
            min-height: 100vh;
            background: #212227 url('media/wallpaper_pink.png') no-repeat center center fixed;
            background-size: 110%; /* bigger for parallax */
            position: relative;
            color: #f9d7d7;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: inherit;
            filter: blur(8px);
            z-index: -1;
            pointer-events: none;
        }

        /* Header with flex layout */
        #header {
            position: fixed;
            top: 0;
            left: 0;
            height: var(--header-h);
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            background-color: #1a1920;
            z-index: 10;
        }
        #header h1 {
            margin: 0;
            font-size: 20px;
            color: #f9d7d7;
        }

        /* Music selector */
        .music-selector {
            background-color: #ff69b4;
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 14px;
            border: none;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .music-selector:hover {
            background-color: #ff85c1;
        }

        /* Enter section centered */
        #enter-section {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #enter-btn {
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            border: none;
            border-radius: 6px;
            background-color: #ff69b4;
            color: white;
            transition: background 0.2s;
        }
        #enter-btn:hover { background-color: #ff85c1; }

        /* Main content */
        .main-content {
            display: none;
            padding-top: calc(var(--header-h) + 16px);
            max-width: 1000px;
            margin: 0 auto;
            text-align: center;
            opacity: 0;
            transform: scale(0.98);
            animation: zoomIn 0.6s ease-out forwards;
        }
        @keyframes zoomIn { to { opacity: 1; transform: scale(1); } }

        .container { margin-top: 30px; }
        .button {
            display: inline-block;
            width: 200px;
            padding: 12px 16px;
            margin: 10px;
            background-color: #3a3d43;
            color: #f9d7d7;
            border-radius: 6px;
            font-size: 18px;
            text-decoration: none;
            transition: transform 0.2s ease-out, background-color 0.2s ease-out;
        }
        .button:hover { background-color: #5b6565; transform: scale(1.05); }
        .button:active { transform: scale(0.97); }

        /* Social grid */
        .social-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-top: 30px;
        }
        .social-btn {
            display: block;
            padding: 10px;
            background-color: #333;
            color: white;
            text-decoration: none;
            border-radius: 6px;
            transition: background 0.2s;
        }
        .social-btn:hover { background-color: #555; }

        /* Visualizer */
        #visualizer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100vw;
            height: 45vh;
            background: transparent;
            z-index: 5;
            pointer-events: none;
            border: none;
            margin: 0;
            padding: 0;
        }

        /* Cursor trail dots */
        .trail {
            position: fixed;
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: fadeTrail 0.6s forwards;
            z-index: 100;
        }
        @keyframes fadeTrail {
            from { opacity: 1; transform: scale(1); }
            to   { opacity: 0; transform: scale(0.5); }
        }

        /* Click ripple effect */
        .click-circle {
            position: fixed;
            border: 2px solid #ffffff;
            border-radius: 50%;
            pointer-events: none;
            animation: ripple 0.6s forwards;
            z-index: 100;
        }
        @keyframes ripple {
            from { opacity: 0.8; transform: scale(0); }
            to   { opacity: 0; transform: scale(2); }
        }
    </style>
</head>

<body>

<div id="header">
    <h1>Welcome to nikava.se</h1>
    <div style="display:flex; gap:8px; align-items:center;">
        <select id="music-selector" class="music-selector">
            <option value="media/music1.ogg">Track 1</option>
            <option value="media/music2.ogg">Track 2</option>
            <option value="media/music3.ogg">Track 3</option>
        </select>
        <button id="play-pause-btn" class="play-pause-btn">Play</button>
    </div>
</div>


    <div id="enter-section">
        <button id="enter-btn">Enter Website</button>
    </div>

    <div class="main-content">
        <p>Select a page to continue:</p>
        
        <div class="container">
            <a href="pages/setup.html" class="button">setup</a>
            <a href="pages/about.html" class="button">About This Website</a>
            <a href="pages/contact.html" class="button">Contact</a>
        </div>

        <div class="social-grid">
            <a href="#" class="social-btn">NameMC</a>
            <a href="#" class="social-btn">YouTube</a>
            <a href="#" class="social-btn">Roblox</a>
            <a href="#" class="social-btn">test</a>
            <a href="#" class="social-btn">test</a>
        </div>
    </div>

    <!-- Visualizer -->
    <canvas id="visualizer"></canvas>
    
    <audio id="bg-music" src="media/music1.ogg"></audio>

    <script>
        // Enter button logic
        document.getElementById("enter-btn").addEventListener("click", function() {
            document.querySelector(".main-content").style.display = "block";
            document.getElementById("enter-section").style.display = "none";

            const music = document.getElementById("bg-music");
            music.play().catch(err => console.log("Autoplay blocked:", err));

            startVisualizer(music);
        });

        // Music selector logic
        const music = document.getElementById("bg-music");
        const selector = document.getElementById("music-selector");
        selector.addEventListener("change", (e) => {
            const wasPlaying = !music.paused;
            music.src = e.target.value;
            if (wasPlaying) {
                music.play().catch(err => console.log("Autoplay blocked:", err));
            }
        });

        // Background parallax effect
        document.addEventListener("mousemove", (e) => {
            const x = (e.clientX / window.innerWidth - 0.5) * 20;
            const y = (e.clientY / window.innerHeight - 0.5) * 20;
            document.body.style.backgroundPosition = `${50 + x}% ${50 + y}%`;
        });

        // Cursor trail
        document.addEventListener("mousemove", (e) => {
            const trail = document.createElement("div");
            trail.className = "trail";
            trail.style.left = e.pageX + "px";
            trail.style.top = e.pageY + "px";
            document.body.appendChild(trail);
            setTimeout(() => trail.remove(), 600);
        });

        // Click ripple
        document.addEventListener("click", (e) => {
            const circle = document.createElement("div");
            circle.className = "click-circle";
            circle.style.left = (e.pageX - 25) + "px";
            circle.style.top = (e.pageY - 25) + "px";
            circle.style.width = "50px";
            circle.style.height = "50px";
            document.body.appendChild(circle);
            setTimeout(() => circle.remove(), 600);
        });

        // Visualizer
        function startVisualizer(audioElement) {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const source = audioCtx.createMediaElementSource(audioElement);
            const analyser = audioCtx.createAnalyser();
            source.connect(analyser);
            analyser.connect(audioCtx.destination);

            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);

            const canvas = document.getElementById("visualizer");
            const ctx = canvas.getContext("2d");

            // store previous heights for smoothing
            let prevHeights = new Array(bufferLength).fill(0);

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight * 0.25;
            }
            resizeCanvas();
            window.addEventListener("resize", resizeCanvas);

            function draw() {
                requestAnimationFrame(draw);
                analyser.getByteFrequencyData(dataArray);

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                const barWidth = (canvas.width / bufferLength) * 2; // spacing
                let x = 0;

                for (let i = 0; i < bufferLength; i++) {
                    const rawHeight = dataArray[i] * 2; // boost responsiveness
                    const barHeight = rawHeight * 0.7 + prevHeights[i] * 0.3; // smoothing
                    prevHeights[i] = barHeight;

// solid white bars
ctx.fillStyle = "#ffffff";
ctx.shadowColor = "#ffffff";   // optional glow
ctx.shadowBlur = 10;           // adjust glow strength


                    // Draw bar, then leave a space
                    ctx.fillRect(x, canvas.height - barHeight, barWidth / 2, barHeight);
                    x += barWidth;
                }
            }
            draw();
        }
    </script>

</body>
</html>
